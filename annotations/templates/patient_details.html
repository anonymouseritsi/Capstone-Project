{% extends 'base.html' %}
{% load static %}

{% block title %}Patients Details - Doctor Dashboard{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/patient_details.css' %}">

<div class="patient-details">

  <h1>{{ patient.name }}'s Details</h1>

  <div class="patient-info">
    <h3>Basic Info</h3>
    <ul>
      <li><span>Age:</span> {{ patient.age }}</li>
    </ul>
  </div>

  <div class="procedures">
    <h3>Procedures</h3>
    <ul>
      <li>
        <span>Procedure:</span> {{ procedure.procedure_type|default:"No recorded procedure" }}
      </li>
      <li>
        <span>Date:</span> {% if procedure.date %}{{ procedure.date }}{% else %}No recorded date{% endif %}
      </li>
      <li>
        <span>Notes:</span> {{ procedure.notes|default:"No recorded notes" }}
      </li>
    </ul>
  </div>

  <div class="patient-info">
    <h3>Images</h3>
    <ul>
      {% for image in patient.images.all %}
        <li>
          <img src="{{ image.image.url }}" alt="Image {{ forloop.counter }}">
        </li>
      {% empty %}
        <li>No images uploaded.</li>
      {% endfor %}
    </ul>
    <p><a href="{% url 'patient_manager:upload_image' patient.name %}">Upload Photos</a></p>
  </div>

  <br>
  <a href="{% url 'patient_manager:edit_patient' patient.name %}">Edit Patient Information</a>
  <br>
  <a href="{% url 'patient_manager:delete_patient' patient.name %}">Delete Patient Record</a>

</div>
{% endblock %}
